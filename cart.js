
let shopItemsData = [
  {
    id: "mrezazagazista1",
    name: "ISTEGNUTI METALI (Mreza za Gazista) 62x20 ",
    price: 63.64,
    img: "katalog/expanded-metal-1.jpg",
  },
  {
    id: "mrezazagazista2",
    name: "ISTEGNUTI METALI (Mreza za Gazista) 62x20 ",
    price: 107.52,
    img: "katalog/expanded-metal-1.jpg",
  },
  {
    id: "mrezazagazista3",
    name: "ISTEGNUTI METALI (Mreza za Gazista) 62x20 ",
    price: 55.92,
    img: "katalog/expanded-metal-1.jpg",
  },



    {
      id: "dekorativnamreza1",
      name: "ISTEGNUTI METALI (Dekorativna mreza) 112x40",
      price: 25.08,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "dekorativnamreza2",
      name: "ISTEGNUTI METALI (Dekorativna mreza) 112x40",
      price: 39.19,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "dekorativnamreza3",
      name: "ISTEGNUTI METALI (Dekorativna mreza) 112x40",
      price: 76.99,
      img: "katalog/expanded-metal-1.jpg",
    },



    {
      id: "industrijskamreza1",
      name: "ISTEGNUTI METALI (Industrijsk Mreza) 80x30",
      price: 40.03,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "industrijskamreza2",
      name: "ISTEGNUTI METALI (Industrijsk Mreza) 80x30",
      price: 78.43,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "industrijskamreza3",
      name: "ISTEGNUTI METALI (Industrijsk Mreza) 80x30",
      price: 134.40,
      img: "katalog/expanded-metal-1.jpg",
    },




    {
      id: "sitnamreza1",
      name: "ISTEGNUTI METALI (Sitna Mreza) 28x9",
      price: 49.80,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "sitnamreza2",
      name: "ISTEGNUTI METALI (Sitna Mreza) 28x9",
      price: 57.60,
      img: "katalog/expanded-metal-1.jpg",
    },
    {
      id: "sitnamreza3",
      name: "ISTEGNUTI METALI (Sitna Mreza) 28x9",
      price: 83.52,
      img: "katalog/expanded-metal-1.jpg",
    },




    {
      id: "crno1",
      name: "RESETKASTA GAZISTA 25/3 Crno",
      price: 153.49,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno2",
      name: "RESETKASTA GAZISTA 25/3 Crno",
      price: 161.43,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno3",
      name: "RESETKASTA GAZISTA 25/3 Crno",
      price: 186.84,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno4",
      name: "RESETKASTA GAZISTA 25/3 Crno",
      price: 225.54,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno5",
      name: "RESETKASTA GAZISTA 25/3 Pocincano",
      price: 186.60,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno6",
      name: "RESETKASTA GAZISTA 25/3 Pocincano",
      price: 196.26,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno7",
      name: "RESETKASTA GAZISTA 25/3 Pocincano",
      price: 227.13,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno8",
      name: "RESETKASTA GAZISTA 25/3 Pocincano",
      price: 274.23,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },


    {
      id: "crno9",
      name: "RESETKASTA GAZISTA 30/3 Crno",
      price: 176.24,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno10",
      name: "RESETKASTA GAZISTA 30/3 Crno",
      price: 184.18,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno11",
      name: "RESETKASTA GAZISTA 30/3 Crno",
      price: 270.69,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno12",
      name: "RESETKASTA GAZISTA 30/3 Crno",
      price: 183.92,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno13",
      name: "RESETKASTA GAZISTA 30/3 Crno",
      price: 157.59,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno14",
      name: "RESETKASTA GAZISTA 30/3 Pocincano ",
      price: 214.26,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno15",
      name: "RESETKASTA GAZISTA 30/3 Pocincano",
      price: 223.92,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno16",
      name: "RESETKASTA GAZISTA 30/3 Pocincano",
      price: 329.07,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno17",
      name: "RESETKASTA GAZISTA 30/3 Pocincano",
      price: 223.59,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno18",
      name: "RESETKASTA GAZISTA 30/3 Pocincano",
      price: 191.66,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno19",
      name: "RESETKASTA GAZISTA 40/3 Crno",
      price: 234.22,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno20",
      name: "RESETKASTA GAZISTA 40/3 Crno",
      price: 242.67,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno21",
      name: "RESETKASTA GAZISTA 40/3 Crno",
      price: 230.64,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno22",
      name: "RESETKASTA GAZISTA 40/3 Crno",
      price: 397.02,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno23",
      name: "RESETKASTA GAZISTA 40/3 Pocincano",
      price: 285.48,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno24",
      name: "RESETKASTA GAZISTA 40/3 Pocincano",
      price: 295.02,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno25",
      name: "RESETKASTA GAZISTA 40/3 Pocincano",
      price: 280.38,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },
    {
      id: "crno26",
      name: "RESETKASTA GAZISTA 40/3 Pocincano",
      price: 438.76,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno27",
      name: "RESETKASTA GAZISTA 30/2 Crno ",
      price: 138.15,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },

    {
      id: "crno28",
      name: "RESETKASTA GAZISTA 30/2 Pocincano ",
      price: 168.04,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },



    {
      id: "crno29",
      name: "RESETKASTA GAZISTA 30/5 Crno ",
      price: 242.22,
      img: "katalog/frp-moulded-gratings-500x500.webp",
    },

    {
      id: "crno30",
    name: "RESETKASTA GAZISTA 30/5 Pocincano ",
    price: 294.50,
    img: "katalog/frp-moulded-gratings-500x500.webp",
  },



  {
    id: "crno31",
    name: "RESETKASTA GAZISTA 50/5 Crno",
    price: 147.20,
    img: "katalog/frp-moulded-gratings-500x500.webp",
  },

  {
    id: "crno32",
    name: "RESETKASTA GAZISTA 50/5 Pocincano ",
  price: 178.95,
  img: "katalog/frp-moulded-gratings-500x500.webp",
},




{
  id: "crno33",
  name: "RESETKASTA GAZISTA 50/3 Crno",
  price: 288.68,
  img: "katalog/frp-moulded-gratings-500x500.webp",
},

{
  id: "crno34",
  name: "RESETKASTA GAZISTA 50/3 Pocincano  ",
  price: 350.95,
  img: "katalog/frp-moulded-gratings-500x500.webp",
},



{
  id: "ku1",
  name: "NOSAC KLIMA UREDJAJA (12-ku ili 3,5 KW)",
  price: 9.96,
  img: "katalog/21.jpg",
},
{
  id: "ku2",
  name: "NOSAC KLIMA UREDJAJA (12-ku ili 3,5 KW)",
  price: 13.56,
  img: "katalog/21.jpg",
},
{
  id: "ku3",
  name: "NOSAC KLIMA UREDJAJA (12-ku ili 3,5 KW)",
  price: 16.20,
  img: "katalog/21.jpg",
},
{
  id: "ku4",
  name: "NOSAC KLIMA UREDJAJA (12-ku ili 3,5 KW)",
  price: 16.80,
  img: "katalog/21.jpg",
},
{
  id: "ku5",
  name: "NOSAC KLIMA UREDJAJA (12-ku ili 3,5 KW)",
  price: 22.20,
  img: "katalog/21.jpg",
},


{
  id: "ku6",
  name: "NOSAC KLIMA UREDJAJA (16-ku)",
  price: 17.40,
  img: "katalog/21.jpg",
},
{
  id: "ku7",
  name: "NOSAC KLIMA UREDJAJA (16-ku)",
  price: 21.36,
  img: "katalog/21.jpg",
},
{
  id: "ku8",
  name: "NOSAC KLIMA UREDJAJA (16-ku)",
  price: 26.52,
  img: "katalog/21.jpg",
},
{
  id: "ku9",
  name: "NOSAC KLIMA UREDJAJA (16-ku)",
  price: 35.40,
  img: "katalog/21.jpg",
},
  ];

let label = document.getElementById("label");
let ShoppingCart = document.getElementById("shopping-cart");

let basket = JSON.parse(localStorage.getItem("data")) || [];

let calculation = () => {
let cartIcon = document.getElementById("cartAmount");
cartIcon.innerHTML = basket.map((x) => x.item).reduce((x, y) => x + y, 0);
};

calculation();

let generateCartItems = () => {
if (basket.length !== 0) {
return (ShoppingCart.innerHTML = basket
.map((x) => {
  let { id, item } = x;
  let search = shopItemsData.find((y) => y.id === id) || [];
  return `

  

  <div class="containerr">
<div class="image">
  <img class="productimage" src=${search.img} alt="" />
</div>
<div class="html-code">
<div class="item">
  <div class="details">
    <i onclick="removeItem(${id})" class="bi bi-x-lg"></i>
    <h3 class="productname">${search.name}</h3>
    <div class="price-quantity">
      <h2 class="cijenapojedinacno">Cijena: ${search.price} KM</h2>
      <div class="buttons">
        <i onclick="decrement(${id})" class="bi bi-dash-lg"></i>
        <div id=${id} class="quantity">${item}</div>
        <i onclick="increment(${id})" class="bi bi-plus-lg"></i>
      </div>
      <div class="green">
<i  class="bi bi-circle-fill"></i>
<div class="online">Na Stanju</div>
</div>
      <h3 class="ukupnacijena">Total: ${item * search.price} KM</h3>
    </div>
  </div>
</div>
</div>
</div>


`;
})
.join(""));
} else {
ShoppingCart.innerHTML = ``;
label.innerHTML = `
<h2 style="color:#f2f2f2;">Kosarica je prazna</h2>
<button style=" text-decoration: none; margin-top:20px; height: 40px; width:195px; color:#282828; background-color:#f2f2f2;" class="HomeBtn"><a href="proizvodi.html">Nazad</a></button>
`;
}
};

generateCartItems();




let increment = (id) => {
let selectedItem = id;
let search = basket.find((x) => x.id === selectedItem.id);

if (search === undefined) {
basket.push({
id: selectedItem.id,
item: 1,
});
} else {
search.item += 1;
}
generateCartItems();
update(selectedItem.id);
localStorage.setItem("data", JSON.stringify(basket));
};





let decrement = (id) => {
let selectedItem = id;
let search = basket.find((x) => x.id === selectedItem.id);

if (search === undefined) return;
else if (search.item === 0) return;
else {
search.item -= 1;
}
update(selectedItem.id);
basket = basket.filter((x) => x.item !== 0);
generateCartItems();
localStorage.setItem("data", JSON.stringify(basket));
};




let update = (id) => {
let search = basket.find((x) => x.id === id);
// console.log(search.item);
document.getElementById(id).innerHTML = search.item;
calculation();
TotalAmount();
};




let removeItem = (id) => {
let selectedItem = id;
// console.log(selectedItem.id);
basket = basket.filter((x) => x.id !== selectedItem.id);
generateCartItems();
TotalAmount();
localStorage.setItem("data", JSON.stringify(basket));
};




let clearCart = () => {
basket = [];
generateCartItems();
localStorage.setItem("data", JSON.stringify(basket));
};





let TotalAmount = () => {
if (basket.length !== 0) {
let amount = basket
.map((x) => {
  let { item, id } = x;
  let search = shopItemsData.find((y) => y.id === id) || [];

  return item * search.price;
})
.reduce((x, y) => x + y, 0);
// console.log(amount);
label.innerHTML = `
<div class="totalcijena">
<div class="total-amount">
<h2 class="h2totalcijena">Ukupna Cijena: ${amount} KM</h2>
</div>
<div class="checkoutt">
<a href="placanje1.html"><button class="checkout">Checkout</button></a>
<button onclick="clearCart()" class="removeAll">Clear Cart</button>
<a href="proizvodi.html"><button class="shopmore">Shop More</button></a>

</div>
</div>
`;
} else return;
};

TotalAmount();





















